[gcode_arcs]
resolution: 0.5

[gcode_macro M5]
description: Stop the spindle
gcode:
  SET_PIN PIN=spindle_en VALUE=1

[gcode_macro M3]
description: Start the spindle
variable_max_speed: 12000.0
gcode:
  {% set speed = params.S|default(0)|float %}
  {% if speed > max_speed %}
    {% set speed=max_speed %}
  {% endif %}
  SET_PIN PIN=spindle_pwm VALUE={speed / max_speed }
  SET_PIN PIN=spindle_en VALUE=0

[gcode_macro ZERO_XY]
description: Set XY to zero
gcode:
  G92 X0 Y0

[gcode_macro ZERO_Z]
description: Set Z to zero
gcode:
  G92 Z0

[gcode_macro ZERO_XYZ]
description: Set XYZ to zero
gcode:
  G92 X0 Y0 Z0

[gcode_macro POBE_ZERO_OFF]
description: Use probe to set sero with offset
gcode:
  PROBE
  G92 Z19.6
  G91
  G1 Z20
  G90

[gcode_macro POBE_ZERO]
description: Use probe to set sero without offset
gcode:
  PROBE
  G92 Z0
  G91
  G1 Z20
  G90
